# PythonDeveloperHomework

Romashka chat, создан в рамках ДЗ разработчика Python\
Представляет собой чат с языковой моделью

Romashka chat предоставляет интерфейс для общения с моделью и хранит историю переписки.

Поскольку в будущем на данное приложение будет заходить большая аудитория, обмен сообщениями реализован через сокеты, а хранение данных реализовано в MongoDB.\
Для обеспечения расширяемости приложения, сделал его модульным, для этого использовал Flask Blueprint.


## Запуск:

Перед запуском убедитесь, что у вас есть доступ до субд MongoDB. **В ней создайте базу данных chat**.\
По умолчанию в качестве адреса MongoDB используется localhost:27017 \
Другой адрес MongoDB можете передать в переменной среды DATABASE_URI в следующем виде, заменив хост и порт на свои: mongodb://localhost:27017/ 


### Переменные среды приложения:

- FLASK_SECRET_KEY - Secret key приложения. Для безопасного использования установите свой.
- FLASK_HOST - Хост запуска приложения, по умолчанию = 0.0.0.0
- FLASK_PORT - Порт запуска приложения, по умолчанию 5000. Порт прописан в докерфайле, его изменение в переменной среды без изменения докерфайла может привести к тому, что приложение не будет отвечать на запросы.
- ERRORS_RISING - Флаг обработки ошибок. Используется для отладки, по умолчанию = False
- DATABASE_URI - ссылка для доступа к MongoDB, по умолчанию = mongodb://localhost:27017/
- LANGMOD_SERVICE_URL - ссылка для доступа к языковой модели, по умолчанию = http://l3m.site:9000
- LANGMOD_SERVICE_TOKEN - токен доступа к языковой модели. По умолчанию прописан токен из задания.

### Сборка и запуск из консоли:

#### Сборка:
docker build -t pdh .

#### Запуск, при наличии локальной настроенной MongoDB: 
docker run -it --network="host" -e FLASK_SECRET_KEY="your_key" pdh

#### Либо, указывайте адрес до MongoDB:
docker run -it -e FLASK_SECRET_KEY="your_key" -e DATABASE_URI="mongodb://your_db_address:db_port/" pdh


